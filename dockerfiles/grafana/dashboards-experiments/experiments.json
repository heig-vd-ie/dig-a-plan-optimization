{
    "annotations": {
        "list": [
            {
                "builtIn": 1,
                "datasource": { "type": "grafana", "uid": "-- Grafana --" },
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
            }
        ]
    },
    "editable": true,
    "fiscalYearStartMonth": 0,
    "graphTooltip": 0,
    "id": 9,
    "links": [],
    "panels": [
        {
            "datasource": { "uid": "afdfds4gcs45ca" },
            "fieldConfig": {
                "defaults": {
                    "color": { "mode": "thresholds" },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [{ "color": "green", "value": 0 }, { "color": "blue", "value": 80 }]
                    }
                },
                "overrides": []
            },
            "gridPos": { "h": 6, "w": 11, "x": 0, "y": 0 },
            "id": 2,
            "options": {
                "displayMode": "basic",
                "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": false },
                "maxVizHeight": 300,
                "minVizHeight": 16,
                "minVizWidth": 8,
                "namePlacement": "auto",
                "orientation": "horizontal",
                "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false },
                "showUnfilled": true,
                "sizing": "auto",
                "valueMode": "color"
            },
            "pluginVersion": "12.3.3",
            "targets": [
                {
                    "dataset": "public",
                    "editorMode": "code",
                    "format": "table",
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration1\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_1%'",
                    "refId": "A",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration2\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_2%'",
                    "refId": "B",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration3\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_3%'",
                    "refId": "C",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration4\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_4%'",
                    "refId": "D",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration5\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_5%'",
                    "refId": "F",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration6\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_6%'",
                    "refId": "G",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration7\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_7%'",
                    "refId": "H",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration8\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_8%'",
                    "refId": "I",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS Iteration9\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_9%'",
                    "refId": "J",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                }
            ],
            "title": "$Table1",
            "transparent": true,
            "type": "bargauge"
        },
        {
            "datasource": { "uid": "afdfds4gcs45ca" },
            "fieldConfig": {
                "defaults": {
                    "color": { "mode": "palette-classic" },
                    "custom": {
                        "fillOpacity": 20,
                        "gradientMode": "none",
                        "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                        "lineWidth": 2,
                        "stacking": { "group": "A", "mode": "none" }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [{ "color": "green", "value": 0 }, { "color": "red", "value": 80 }]
                    }
                },
                "overrides": []
            },
            "gridPos": { "h": 9, "w": 11, "x": 12, "y": 0 },
            "id": 1,
            "options": {
                "bucketCount": 50,
                "combine": false,
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom",
                    "showLegend": true,
                    "sortBy": "Name",
                    "sortDesc": false
                },
                "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" }
            },
            "pluginVersion": "12.3.3",
            "targets": [
                {
                    "dataset": "public",
                    "editorMode": "code",
                    "format": "table",
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS $Table1\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_${iteration_number}%'",
                    "refId": "A",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS $Table2\nFROM \n  $Table2, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_${iteration_number}%'",
                    "refId": "B",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                }
            ],
            "title": "$Table1 vs $Table2",
            "transparent": true,
            "type": "histogram"
        },
        {
            "datasource": { "uid": "afdfds4gcs45ca" },
            "fieldConfig": {
                "defaults": {
                    "color": { "mode": "thresholds" },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [{ "color": "green", "value": 0 }, { "color": "blue", "value": 80 }]
                    }
                },
                "overrides": [
                    {
                        "matcher": { "id": "byName", "options": "< 80" },
                        "properties": [{ "id": "color", "value": { "fixedColor": "orange", "mode": "fixed" }}]
                    }
                ]
            },
            "gridPos": { "h": 6, "w": 11, "x": 0, "y": 6 },
            "id": 5,
            "options": {
                "displayMode": "basic",
                "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": false },
                "maxVizHeight": 300,
                "minVizHeight": 16,
                "minVizWidth": 8,
                "namePlacement": "top",
                "orientation": "horizontal",
                "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false },
                "showUnfilled": true,
                "sizing": "auto",
                "valueMode": "color"
            },
            "pluginVersion": "12.3.3",
            "targets": [
                {
                    "dataset": "public",
                    "editorMode": "code",
                    "format": "table",
                    "rawQuery": true,
                    "rawSql": "SELECT \n  t1.val AS \"${Table1}\",\n  t2.val AS \"${Table2}\"\nFROM (\n  SELECT val::float, row_number() OVER () as idx\n  FROM $Table1, jsonb_array_elements_text(data->'objectives') AS val\n  WHERE source_file LIKE '%sddp_response_${iteration_number}%'\n) t1\nJOIN (\n  SELECT val::float, row_number() OVER () as idx\n  FROM $Table2, jsonb_array_elements_text(data->'objectives') AS val\n  WHERE source_file LIKE '%sddp_response_${iteration_number}%'\n) t2 ON t1.idx = t2.idx\nORDER BY t1.idx",
                    "refId": "A",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                }
            ],
            "title": "$Table1 vs $Table2",
            "transparent": true,
            "type": "bargauge"
        },
        {
            "datasource": { "uid": "afdfds4gcs45ca" },
            "fieldConfig": {
                "defaults": {
                    "color": { "mode": "palette-classic" },
                    "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "fillOpacity": 50,
                        "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                        "pointShape": "square",
                        "pointSize": { "fixed": 5, "max": 10 },
                        "pointStrokeWidth": 0,
                        "scaleDistribution": { "type": "linear" },
                        "show": "points"
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [{ "color": "green", "value": 0 }, { "color": "red", "value": 80 }]
                    }
                },
                "overrides": []
            },
            "gridPos": { "h": 9, "w": 11, "x": 12, "y": 9 },
            "id": 4,
            "options": {
                "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true },
                "mapping": "auto",
                "series": [
                    {
                        "frame": { "matcher": { "id": "byIndex", "options": 0 }},
                        "size": { "matcher": { "id": "byName", "options": "percentage" }},
                        "y": { "matcher": { "id": "byName", "options": "total_cost" }}
                    }
                ],
                "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" }
            },
            "pluginVersion": "12.3.3",
            "targets": [
                {
                    "dataset": "public",
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "WITH calculated_data AS (\n  SELECT \n    (sim_obj->>'node_index')::float AS stage,\n    -- Calculate Total Cost (NPV adjusted per your formula)\n    ((sim_obj->>'obj')::float) / (1 / (1 + 0.05))^((sim_obj->>'node_index')::float * 5 - 1) AS total_cost,\n    ((sim_obj->>'investment_cost')::float) AS investment_cost\n  FROM \n    $Table1,\n    jsonb_array_elements(data->'simulations') AS sub_list,\n    jsonb_array_elements(sub_list) AS sim_obj\n  WHERE \n    source_file LIKE '%sddp_response_${iteration_number}%'\n)\nSELECT\n  stage,\n  investment_cost / (total_cost+0.001) AS percentage,\n  total_cost\nFROM calculated_data\nORDER BY stage ASC;",
                    "refId": "A",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": true,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  stage_id AS \"Stage\",\n  SUM(simulation_delta_sum) AS \"δ_cap\"\nFROM (\n  SELECT \n    p_idx AS path_id,\n    s_idx AS stage_id,\n    -- Summing the δ_cap list inside the Simulation object\n    (SELECT SUM(val::float) FROM jsonb_array_elements_text(sim_obj->'δ_cap') AS val) AS simulation_delta_sum\n  FROM \n    $Table1,\n    jsonb_array_elements(data->'simulations') WITH ORDINALITY AS p(sub_list, p_idx),\n    jsonb_array_elements(sub_list) WITH ORDINALITY AS s(sim_obj, s_idx)\n  WHERE \n    source_file LIKE '%sddp_response_${iteration_number}%'\n) AS flattened_data\nGROUP BY \n  path_id, stage_id\nORDER BY \n  path_id, stage_id ASC",
                    "refId": "B",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": true,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  stage_id AS \"Stage\",\n  SUM((unmet_item->>'out')::float) AS \"Total_Unmet_Load_Out\"\nFROM (\n  SELECT \n    p_idx AS path_id,\n    s_idx AS stage_id,\n    -- Expanding the list of StateVar objects\n    jsonb_array_elements(sim_obj->'total_unmet_pv') AS unmet_item\n  FROM \n    $Table1,\n    jsonb_array_elements(data->'simulations') WITH ORDINALITY AS p(sub_list, p_idx),\n    jsonb_array_elements(sub_list) WITH ORDINALITY AS s(sim_obj, s_idx)\n  WHERE \n    source_file LIKE '%sddp_response_${iteration_number}%'\n) AS expanded_unmet_data\nGROUP BY \n  path_id, stage_id\nORDER BY \n  path_id, stage_id ASC;",
                    "refId": "C",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                }
            ],
            "title": "$Table1 stage1",
            "transparent": true,
            "type": "xychart"
        },
        {
            "datasource": { "uid": "afdfds4gcs45ca" },
            "fieldConfig": {
                "defaults": {
                    "color": { "mode": "palette-classic" },
                    "custom": {
                        "fillOpacity": 20,
                        "gradientMode": "none",
                        "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                        "lineWidth": 2,
                        "stacking": { "group": "A", "mode": "none" }
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [{ "color": "green", "value": 0 }, { "color": "red", "value": 80 }]
                    }
                },
                "overrides": []
            },
            "gridPos": { "h": 9, "w": 11, "x": 0, "y": 12 },
            "id": 3,
            "options": {
                "bucketCount": 50,
                "combine": false,
                "legend": {
                    "calcs": [],
                    "displayMode": "list",
                    "placement": "bottom",
                    "showLegend": true,
                    "sortBy": "Name",
                    "sortDesc": false
                },
                "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" }
            },
            "pluginVersion": "12.3.3",
            "targets": [
                {
                    "dataset": "public",
                    "editorMode": "code",
                    "format": "table",
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS InSample\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_${iteration_number}%'",
                    "refId": "A",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                },
                {
                    "dataset": "public",
                    "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "SELECT \n  (value)::float AS OutOfSample\nFROM \n  $Table1, \n  jsonb_array_elements_text(data->'out_of_sample_objectives') AS value\nWHERE \n  source_file LIKE '%sddp_response_${iteration_number}%'",
                    "refId": "B",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                }
            ],
            "title": "$Table1 (In sample vs out of sample)",
            "transparent": true,
            "type": "histogram"
        },
        {
            "datasource": { "uid": "afdfds4gcs45ca" },
            "fieldConfig": {
                "defaults": {
                    "color": { "mode": "palette-classic" },
                    "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "fillOpacity": 50,
                        "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                        "pointShape": "circle",
                        "pointSize": { "fixed": 5 },
                        "pointStrokeWidth": 1,
                        "scaleDistribution": { "type": "linear" },
                        "show": "points"
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [{ "color": "green", "value": 0 }, { "color": "red", "value": 80 }]
                    }
                },
                "overrides": []
            },
            "gridPos": { "h": 9, "w": 11, "x": 12, "y": 18 },
            "id": 6,
            "options": {
                "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true },
                "mapping": "auto",
                "series": [
                    {
                        "x": { "matcher": { "id": "byName", "options": "stage" }},
                        "y": { "matcher": { "id": "byName", "options": "v_pu" }}
                    }
                ],
                "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" }
            },
            "pluginVersion": "12.3.3",
            "targets": [
                {
                    "dataset": "public",
                    "editorMode": "code",
                    "format": "table",
                    "hide": false,
                    "rawQuery": true,
                    "rawSql": "WITH extracted_data AS (\n    SELECT \n      -- Using negative indices to count from the end of the filename string\n      REPLACE(split_part(t.source_file, '_', -3), 'iter', '')::int AS iteration,\n      REPLACE(split_part(t.source_file, '_', -2), 'stage', '')::int AS stage,\n      REPLACE(REPLACE(split_part(t.source_file, '_', -1), 'scen', ''), '.json', '')::int AS scenario,\n      v.internal_scen,\n      (node_data->>'node_id')::int AS node_id,\n      (node_data->>'v_pu')::float AS v_pu\n    FROM \n      $Table1 t\n    LEFT JOIN LATERAL jsonb_each(t.data->'voltage') AS v(internal_scen, node_list) ON TRUE\n    LEFT JOIN LATERAL jsonb_array_elements(v.node_list) AS node_data ON TRUE\n    WHERE \n      t.source_file ILIKE '%admm_result_iter%'\n)\nSELECT * FROM extracted_data\nWHERE iteration = (SELECT MAX(iteration) FROM extracted_data)\nORDER BY stage, scenario, internal_scen, node_id;",
                    "refId": "A",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                }
            ],
            "title": "$Table1",
            "transparent": true,
            "type": "xychart"
        },
        {
            "datasource": { "type": "grafana-postgresql-datasource", "uid": "afdfds4gcs45ca" },
            "fieldConfig": {
                "defaults": {
                    "color": { "mode": "palette-classic" },
                    "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "fillOpacity": 61,
                        "hideFrom": { "legend": false, "tooltip": false, "viz": false },
                        "pointShape": "circle",
                        "pointSize": { "fixed": 2, "max": 40, "min": 0.001 },
                        "pointStrokeWidth": 1,
                        "scaleDistribution": { "type": "linear" },
                        "show": "points"
                    },
                    "mappings": [],
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [{ "color": "green", "value": 0 }, { "color": "red", "value": 80 }]
                    }
                },
                "overrides": []
            },
            "gridPos": { "h": 8, "w": 12, "x": 0, "y": 21 },
            "id": 7,
            "options": {
                "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": false },
                "mapping": "manual",
                "series": [
                    {
                        "frame": { "matcher": { "id": "byIndex", "options": 0 }},
                        "size": { "matcher": { "id": "byName", "options": "capacity" }},
                        "x": { "matcher": { "id": "byName", "options": "latitude" }},
                        "y": { "matcher": { "id": "byName", "options": "longitude" }}
                    }
                ],
                "tooltip": { "hideZeros": false, "mode": "single", "sort": "none" }
            },
            "pluginVersion": "12.3.3",
            "targets": [
                {
                    "dataset": "experiments",
                    "editorMode": "code",
                    "format": "table",
                    "rawQuery": true,
                    "rawSql": "SELECT \n    -- 1. Flexible Regex: 'iter' followed by any non-digits, then capturing the digits\n    (substring(t.source_file FROM 'iter[^0-9]*(\\d+)'))::int AS iteration,\n    \n    -- 2. Flexible Regex: Handles 'stage' or 'st' if the name varies\n    (substring(t.source_file FROM 'stage[^0-9]*(\\d+)'))::int AS stage,\n    \n    -- 3. Flexible Regex: Handles 'scen' or 'scenario'\n    (substring(t.source_file FROM 'scen[^0-9]*(\\d+)'))::int AS scenario,\n\n    item->>'eq_fk' AS uuid,\n    item->>'edge_id' AS edge_id,\n    (item->'coords'->>0)::numeric AS \"longitude\",\n    (item->'coords'->>2)::numeric AS \"latitude\",\n    AVG((item->'p_max_pu')::numeric) AS \"capacity\"\nFROM \n    $Table1 AS t,\n    jsonb_array_elements(t.data) AS item\nWHERE \n    t.source_file ILIKE '%recorded_edge_data_iter%'\n    AND (substring(t.source_file FROM 'iter[^0-9]*(\\d+)'))::int = $iteration_number\n    AND (substring(t.source_file FROM 'stage[^0-9]*(\\d+)'))::int = $stage\nGROUP BY 1,2,3,4,5,6,7;",
                    "refId": "A",
                    "sql": {
                        "columns": [{ "parameters": [], "type": "function" }],
                        "groupBy": [{ "property": { "type": "string" }, "type": "groupBy" }],
                        "limit": 50
                    }
                }
            ],
            "title": "New panel",
            "type": "xychart"
        }
    ],
    "preload": false,
    "schemaVersion": 42,
    "tags": [],
    "templating": {
        "list": [
            {
                "current": { "text": "run_ieee33", "value": "run_ieee33" },
                "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                "definition": "SELECT table_name \nFROM information_schema.tables \nWHERE table_schema = 'public' \n  AND table_type = 'BASE TABLE';",
                "name": "Table1",
                "options": [],
                "query": "SELECT table_name \nFROM information_schema.tables \nWHERE table_schema = 'public' \n  AND table_type = 'BASE TABLE';",
                "refresh": 1,
                "regex": "",
                "type": "query"
            },
            {
                "current": { "text": "run_deleteit", "value": "run_deleteit" },
                "datasource": { "type": "postgres", "uid": "afdfds4gcs45ca" },
                "definition": "SELECT table_name \nFROM information_schema.tables \nWHERE table_schema = 'public' \n  AND table_type = 'BASE TABLE';",
                "name": "Table2",
                "options": [],
                "query": "SELECT table_name \nFROM information_schema.tables \nWHERE table_schema = 'public' \n  AND table_type = 'BASE TABLE';",
                "refresh": 1,
                "regex": "",
                "type": "query"
            },
            {
                "current": { "text": "5", "value": "5" },
                "name": "iteration_number",
                "options": [
                    { "selected": true, "text": "1", "value": "1" },
                    { "selected": false, "text": "2", "value": "2" },
                    { "selected": false, "text": "3", "value": "3" },
                    { "selected": false, "text": "4", "value": "4" },
                    { "selected": false, "text": "5", "value": "5" },
                    { "selected": false, "text": "6", "value": "6" },
                    { "selected": false, "text": "7", "value": "7" },
                    { "selected": false, "text": "8", "value": "8" },
                    { "selected": false, "text": "9", "value": "9" },
                    { "selected": false, "text": "10", "value": "10" }
                ],
                "query": "1,2,3,4,5,6,7,8,9,10",
                "type": "custom"
            },
            {
                "current": { "text": "1", "value": "1" },
                "name": "stage",
                "options": [
                    { "selected": true, "text": "1", "value": "1" },
                    { "selected": false, "text": "2", "value": "2" },
                    { "selected": false, "text": "3", "value": "3" },
                    { "selected": false, "text": "4", "value": "4" },
                    { "selected": false, "text": "5", "value": "5" }
                ],
                "query": "1,2,3,4,5",
                "type": "custom"
            }
        ]
    },
    "time": { "from": "now-6h", "to": "now" },
    "timepicker": { "hidden": true },
    "timezone": "browser",
    "title": "Experiments",
    "uid": "adg7cw7",
    "version": 1
}
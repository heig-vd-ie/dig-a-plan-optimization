<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Reconfiguration Theory &amp; Experiments (IEEE-33)" href="theory-reconfiguration.html"><link rel="prev" title="Ray Worker Setup (Remote Execution)" href="ray-worker.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.12.19 -->
        <title>Expansion theory: SDDP + ADMM coupling - Dig-A-Plan-Optimization documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../_static/css/sphinx_rtd_size.css?v=8f58cd29" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=21864d6c" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  --color-brand-primary: #336790;
  --color-brand-content: #336790;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Dig-A-Plan-Optimization  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">Dig-A-Plan-Optimization  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ray-worker.html">Ray Worker Setup (Remote Execution)</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Expansion theory: SDDP + ADMM coupling</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory-reconfiguration.html">Reconfiguration Theory &amp; Experiments (IEEE-33)</a></li>
<li class="toctree-l1"><a class="reference internal" href="figures.html">Plotting &amp; Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="Julia/expansion-planning.html">Stochastic Distribution Grid Planning</a></li>
<li class="toctree-l1"><a class="reference internal" href="Julia/01-install-julia.html">Install Julia</a></li>
<li class="toctree-l1"><a class="reference internal" href="Julia/02-create-julia-projects.html">How to create julia projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="Julia/03-hydro-thermal-sddp.html">Hydro Thermal SDDP</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/ops/theory-expansion-sddp-admm.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="expansion-theory-sddp-admm-coupling">
<h1>Expansion theory: SDDP + ADMM coupling<a class="headerlink" href="#expansion-theory-sddp-admm-coupling" title="Link to this heading">¶</a></h1>
<p>Expansion planning in Dig-A-Plan is built on two layers:</p>
<ul class="simple">
<li><p><strong>SDDP</strong> (Julia) for <strong>multi-stage expansion planning</strong>, and</p></li>
<li><p><strong>ADMM</strong> (Python) for <strong>operational feasibility checks</strong> (power-flow constraints under scenarios),</p></li>
</ul>
<p>using <strong>cut feedback</strong> (Benders-style information) to refine planning decisions.</p>
<hr class="docutils" />
<section id="what-expansion-planning-solves">
<h2>1) What expansion planning solves<a class="headerlink" href="#what-expansion-planning-solves" title="Link to this heading">¶</a></h2>
<p>Expansion planning decides <strong>what to upgrade (lines/transformers)</strong> and <strong>when</strong> so the grid remains feasible as load and PV evolve.<br />
Because the future is uncertain, the plan must work across <strong>multiple scenarios</strong> while respecting operational limits (voltage/current/device constraints).</p>
<p>To achieve this, Dig-A-Plan uses a <strong>planning–operations loop</strong> coordinated by the <strong>API</strong>, which exchanges information between the planning and operational models:</p>
<ol class="arabic simple">
<li><p><strong>Planning (SDDP / Julia)</strong> proposes candidate investment decisions for each stage (e.g., which line/transformer capacities to reinforce and when).</p></li>
<li><p><strong>Operations (ADMM / Python)</strong> checks whether the grid can operate under many scenarios given those investments (power-flow feasibility, voltage/current limits, and device actions such as taps/switching if enabled).</p></li>
<li><p><strong>Cuts / feedback</strong> are extracted from the operational solves and sent back (via the API) to SDDP, so the next planning iteration improves (the planner learns which investments avoid infeasibility or high operational penalties).</p></li>
</ol>
<section id="planning-operations-feedback-loop">
<h3>Planning ↔ Operations feedback loop<a class="headerlink" href="#planning-operations-feedback-loop" title="Link to this heading">¶</a></h3>
<p><img alt="Planning–operations feedback loop (SDDP ↔ ADMM via cuts)" src="../_images/expansion-loop.png" /></p>
<p><em>The API sits between SDDP and ADMM: SDDP sends candidate expansion decisions to ADMM for feasibility checks, and ADMM returns cutting-plane feedback (cuts) that refines the next SDDP iteration.</em></p>
</section>
</section>
<hr class="docutils" />
<section id="what-sddp-is-doing-planning-layer">
<h2>2) What SDDP is doing (planning layer)<a class="headerlink" href="#what-sddp-is-doing-planning-layer" title="Link to this heading">¶</a></h2>
<p>SDDP solves the <strong>long-term expansion planning</strong> problem as a <strong>multi-stage stochastic optimization</strong>:</p>
<ul class="simple">
<li><p><strong>Stages</strong>: planning periods (e.g., 5 stages representing 5-year blocks)</p></li>
<li><p><strong>Uncertainty</strong>: how load and PV evolve over time (represented by sampled scenarios)</p></li>
<li><p><strong>Decisions</strong>: how much to reinforce/expand <strong>line and transformer capacities</strong>, balancing investment cost against future operational risk</p></li>
</ul>
<p>SDDP runs in two complementary phases:</p>
<ul class="simple">
<li><p><strong>Forward simulation</strong>: it samples scenarios and simulates the current planning policy stage-by-stage to generate candidate states/decisions.</p></li>
<li><p><strong>Backward recursion</strong>: it solves stage subproblems and updates a piecewise-linear approximation of the <strong>future cost-to-go</strong> using <strong>cuts</strong>.</p></li>
</ul>
<p>These cuts capture how future cost/feasibility changes with the planning state. In Dig-A-Plan, the approximation is strengthened over iterations using feedback from the operational layer (ADMM), so SDDP learns expansion decisions that remain feasible across scenarios.</p>
</section>
<hr class="docutils" />
<section id="what-admm-does-operations-layer">
<h2>3) What ADMM does (operations layer)<a class="headerlink" href="#what-admm-does-operations-layer" title="Link to this heading">¶</a></h2>
<p>The expansion decisions proposed by SDDP are only useful if the grid can <strong>actually operate</strong> once those reinforcements are built.<br />
For each candidate plan (and for many scenarios), Dig-A-Plan solves an operational feasibility problem that enforces:</p>
<ul class="simple">
<li><p>power-flow constraints</p></li>
<li><p>voltage bounds</p></li>
<li><p>current/thermal limits</p></li>
<li><p>device constraints (e.g., OLTC tap ranges)</p></li>
<li><p>switching / reconfiguration decisions</p></li>
</ul>
<p>Running these operational checks for many scenarios can be computationally expensive, especially on large networks.</p>
<p>To scale this step, Dig-A-Plan uses <strong>ADMM</strong> as a <strong>scenario-decomposition</strong> method:</p>
<ul class="simple">
<li><p>Each scenario (or scenario group) is solved as a subproblem.</p></li>
<li><p>A consensus step coordinates shared variables/constraints across subproblems.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="how-the-coupling-works-cuts-from-operations-to-planning">
<h2>4) How the coupling works: “cuts” from operations to planning<a class="headerlink" href="#how-the-coupling-works-cuts-from-operations-to-planning" title="Link to this heading">¶</a></h2>
<p>After SDDP proposes a candidate plan (capacities / investments), ADMM solves the corresponding operational problem.</p>
<p>From the operational solution, we extract <strong>sensitivity information</strong> (typically dual variables / multipliers) and build a cut that tells the planner:</p>
<p>These cuts are accumulated and passed back to SDDP, improving the cost-to-go approximation and steering investments toward operational feasibility.</p>
</section>
<hr class="docutils" />
<section id="minimal-how-to-run-for-context">
<h2>5) Minimal “how to run” (for context)<a class="headerlink" href="#minimal-how-to-run-for-context" title="Link to this heading">¶</a></h2>
<section id="run-expansion-ieee-33-example">
<h3>Run expansion (IEEE-33 example)<a class="headerlink" href="#run-expansion-ieee-33-example" title="Link to this heading">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>experiments/expansion_planning_script.py<span class="w"> </span>--kace<span class="w"> </span>ieee_33<span class="w"> </span>--cachename<span class="w"> </span>run_ieee33
</pre></div>
</div>
<p>Useful options:</p>
<ul class="simple">
<li><p>withapi false:
Run locally without calling the FastAPI server (useful for debugging).</p></li>
<li><p>admmiter <n>:
Override admm_config.max_iters to speed up tests (fewer ADMM iterations).</p></li>
<li><p>riskmeasuretype &lt;Expectation|Entropic|Wasserstein|CVaR|WorstCase&gt;:
Select the SDDP risk measure.</p></li>
<li><p>riskmeasureparam <value>:
Set the risk-measure parameter used by SDDP.</p></li>
<li><p>fixed_switches true|false:
If true, ADMM treats switches as fixed (no switching optimization).</p></li>
</ul>
<p>Outputs are saved under .cache/.</p>
</section>
</section>
<hr class="docutils" />
<section id="key-concepts">
<h2>6) Key concepts<a class="headerlink" href="#key-concepts" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Stage</strong>: a planning time period (e.g., 5-year block).</p></li>
<li><p><strong>Scenario</strong>: one realization of uncertainty (load/PV evolution, profiles).</p></li>
<li><p><strong>Planning decision</strong>: reinforcement/expansion capacity decisions.</p></li>
<li><p><strong>Operational decision</strong>: feasibility actions (flows, taps, switching).</p></li>
<li><p><strong>Cut</strong>: linear approximation used by SDDP to represent future cost/feasibility impact.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="input-payload-00-expansion-json">
<h2>7) Input payload (00-expansion.json)<a class="headerlink" href="#input-payload-00-expansion-json" title="Link to this heading">¶</a></h2>
<p>All three reconfiguration scripts start from the same payload file:</p>
<p><code class="docutils literal notranslate"><span class="pre">experiments/ieee_33/00-expansion.json</span></code></p>
<p>It has three main blocks:</p>
<section id="grid">
<h3>7.1 <code class="docutils literal notranslate"><span class="pre">grid</span></code><a class="headerlink" href="#grid" title="Link to this heading">¶</a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;grid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;pp_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;examples/ieee_33/simple_grid.p&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;s_base&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1000000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;cosφ&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.95</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;egid_id_mapping_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;examples/ieee_33/consumer_egid_idx_mapping.csv&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;minimum_impedance&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pp_file</span></code>: path to the <strong>pandapower</strong> network snapshot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s_base</span></code>: base power used for per-unit scaling (e.g., 1 MVA).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosφ</span></code>: default power factor assumption.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">egid_id_mapping_file</span></code>: mapping between consumer identifiers and internal indices.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minimum_impedance</span></code>: a floor to prevent numerical issues (e.g., zero-impedance branches).</p></li>
</ul>
</section>
<section id="profiles">
<h3>7.2 <code class="docutils literal notranslate"><span class="pre">profiles</span></code><a class="headerlink" href="#profiles" title="Link to this heading">¶</a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;profiles&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;load_profiles&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;examples/ieee_33/load_profiles&quot;</span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;pv_profile&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;examples/ieee_33/pv_profiles&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target_year&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2030</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;quarter&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;scenario_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Basic&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Load and PV profiles define <strong>scenario time series</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target_year</span></code>, <code class="docutils literal notranslate"><span class="pre">quarter</span></code>, <code class="docutils literal notranslate"><span class="pre">scenario_name</span></code> choose a slice of the scenario dataset.</p></li>
<li><p>These files are in parqut and each scenario has following structure `Basic_year.parquet:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>┌────────┬─────┬─────┬─────┬───┬───────┬───────┬───────┬───────┐
│ egid   ┆ _0  ┆ _1  ┆ _2  ┆ … ┆ _8757 ┆ _8758 ┆ _8759 ┆ _1998 │
│ ---    ┆ --- ┆ --- ┆ --- ┆   ┆ ---   ┆ ---   ┆ ---   ┆ ---   │
│ str    ┆ f64 ┆ f64 ┆ f64 ┆   ┆ f64   ┆ f64   ┆ f64   ┆ f64   │
╞════════╪═════╪═════╪═════╪═══╪═══════╪═══════╪═══════╪═══════╡
│ 883806 ┆ 0.0 ┆ 0.0 ┆ 0.0 ┆ … ┆ 0.0   ┆ 0.0   ┆ 0.0   ┆ 0.0   │
</pre></div>
</div>
</section>
<section id="admm-config">
<h3>7.3 <code class="docutils literal notranslate"><span class="pre">admm_config</span></code><a class="headerlink" href="#admm-config" title="Link to this heading">¶</a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;admm_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;verbose&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;solver_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gurobi&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;solver_non_convex&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;big_m&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;ε&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;ρ&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;γ_admm_penalty&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;γ_infeasibility&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;γ_trafo_loss&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;time_limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;max_iters&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;μ&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;τ_incr&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;τ_decr&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;seed&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;vm_max_pu&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">1.05</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;vm_min_pu&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.95</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This block contains solver and algorithm parameters. Not all fields are used by all methods.</p>
<p>Typical roles:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">solver_name</span></code>: optimizer backend (e.g., <code class="docutils literal notranslate"><span class="pre">gurobi</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">solver_non_convex</span></code>: controls nonconvex handling in the solver.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">big_m</span></code>: Big-M constant used in mixed-integer constraints (e.g., switching logic).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ε</span></code>, <code class="docutils literal notranslate"><span class="pre">ρ</span></code>: commonly used as ADMM tuning parameters / tolerances.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">γ_infeasibility</span></code>: weight for infeasibility slack penalties (encourages feasibility).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time_limit</span></code>: runtime limit per solve / iteration (seconds).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_iters</span></code>: maximum iterations (notably ADMM).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vm_min_pu</span></code>, <code class="docutils literal notranslate"><span class="pre">vm_max_pu</span></code>: voltage bounds.</p></li>
</ul>
<p>Note: In the Benders and Combined scripts, <code class="docutils literal notranslate"><span class="pre">konfig</span></code> is <strong>filtered</strong> to the fields supported by their respective Pydantic configs, then some values are overridden for that method.</p>
</section>
<section id="sddp-config">
<h3>7.4 <code class="docutils literal notranslate"><span class="pre">sddp_config</span></code><a class="headerlink" href="#sddp-config" title="Link to this heading">¶</a></h3>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="nt">&quot;sddp_config&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;iterations&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;n_simulations&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;n_optimizations&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;n_stages&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;n_scenarios&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;initial_budget&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">500000</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;discount_rate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;years_per_stage&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;risk_measure_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Expectation&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;risk_measure_param&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;expansion_line_cost_per_km_kw&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;expansion_transformer_cost_per_kw&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;penalty_cost_per_consumption_kw&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;penalty_cost_per_production_kw&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;δ_b_var&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<p>This block contains solver and algorithm parameters. Not all fields are used by all methods.</p>
<p>Typical roles:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iterations</span></code>: Sets the maximum number of iterations the algorithm will perform to converge on a solution.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_simulations</span></code>: Defines the number of forward-pass Monte Carlo simulations used to evaluate the current policy’s performance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_optimizations</span></code>: Specifies how many optimization sub-problems are solved during a single stage or iteration.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_stages</span></code>: Represents the total number of discrete time steps or decision periods in the planning horizon.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_scenarios</span></code>: Indicates the number of possible future outcomes or paths sampled at each stage to account for uncertainty.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">initial_budget</span></code>: Sets the starting financial capital available for investment or system expansion at the beginning of the horizon.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">discount_rate</span></code>: Determines the rate used to calculate the present value of future costs and benefits, reflecting the time value of money.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">years_per_stage</span></code>: Defines the duration of time that a single stage represents in the overall planning model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">risk_measure_type</span></code>: Specifies the mathematical approach used to evaluate risk, such as “Expectation” or “CVaR.”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">risk_measure_param</span></code>: Provides the weighting or threshold value associated with the chosen risk measure, such as the confidence level for risk-aversion.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expansion_line_cost_per_km_kw</span></code>: Sets the unit cost for building new transmission lines based on distance and power capacity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expansion_transformer_cost_per_kw</span></code>: Represents the capital expenditure required per unit of power for adding or upgrading transformer capacity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">penalty_cost_per_consumption_kw</span></code>: Defines the financial penalty incurred for failing to meet load demand, often representing the cost of unserved energy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">penalty_cost_per_production_kw</span></code>: Establishes the cost associated with curtailed energy or overproduction that exceeds system requirements.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">δ_b_var</span></code>: Acts as a convergence tolerance or a slack variable used to manage constraints and stabilize the optimization process.</p></li>
</ul>
</section>
<section id="iterations-and-seed">
<h3>7.5 <code class="docutils literal notranslate"><span class="pre">iterations</span></code> and <code class="docutils literal notranslate"><span class="pre">seed</span></code><a class="headerlink" href="#iterations-and-seed" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iterations</span></code>: number of iteration of the loop (c).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seed</span></code>: Seed number.</p></li>
</ul>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="theory-reconfiguration.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Reconfiguration Theory &amp; Experiments (IEEE-33)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="ray-worker.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Ray Worker Setup (Remote Execution)</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, HEIG-VD (Institute of Energies)
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/heig-vd-ie/dig-a-plan-optimization" aria-label="GitHub">
            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
            </svg>
        </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Expansion theory: SDDP + ADMM coupling</a><ul>
<li><a class="reference internal" href="#what-expansion-planning-solves">1) What expansion planning solves</a><ul>
<li><a class="reference internal" href="#planning-operations-feedback-loop">Planning ↔ Operations feedback loop</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-sddp-is-doing-planning-layer">2) What SDDP is doing (planning layer)</a></li>
<li><a class="reference internal" href="#what-admm-does-operations-layer">3) What ADMM does (operations layer)</a></li>
<li><a class="reference internal" href="#how-the-coupling-works-cuts-from-operations-to-planning">4) How the coupling works: “cuts” from operations to planning</a></li>
<li><a class="reference internal" href="#minimal-how-to-run-for-context">5) Minimal “how to run” (for context)</a><ul>
<li><a class="reference internal" href="#run-expansion-ieee-33-example">Run expansion (IEEE-33 example)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#key-concepts">6) Key concepts</a></li>
<li><a class="reference internal" href="#input-payload-00-expansion-json">7) Input payload (00-expansion.json)</a><ul>
<li><a class="reference internal" href="#grid">7.1 <code class="docutils literal notranslate"><span class="pre">grid</span></code></a></li>
<li><a class="reference internal" href="#profiles">7.2 <code class="docutils literal notranslate"><span class="pre">profiles</span></code></a></li>
<li><a class="reference internal" href="#admm-config">7.3 <code class="docutils literal notranslate"><span class="pre">admm_config</span></code></a></li>
<li><a class="reference internal" href="#sddp-config">7.4 <code class="docutils literal notranslate"><span class="pre">sddp_config</span></code></a></li>
<li><a class="reference internal" href="#iterations-and-seed">7.5 <code class="docutils literal notranslate"><span class="pre">iterations</span></code> and <code class="docutils literal notranslate"><span class="pre">seed</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=8a448e45"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>